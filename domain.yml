version: "3.1"

intents:
  - greet
  - get_news
  - ask_question
  - schedule_medication
  - medication_reminder_callback
  - EXTERNAL_revert

actions:
  - hello_world
  - action_fetch_news
  - action_custom_knowledge_answer
  - action_fetch_weather
  - action_notify_medication
  - action_schedule_medication_reminder
responses:
  utter_time_for_medication:
    - text: "It is time for your medication."
  utter_medication_reminder_callback:
    - text: "Triggering reminder callback"
slots:
  reminder_callback_pending:
    type: bool  # Assuming you want a boolean slot
    initial_value: False
    influence_conversation: true

rules:
  - rule: Schedule medication reminder
    steps:
      - intent: schedule_medication
      - action: action_schedule_medication_reminder
      - action: SlotSet('reminder_callback_pending', True)
  - rule: reminder_callback
    steps:
      - intent: EXTERNAL_revert
      - condition:
          - slot_was_set:
              reminder_callback_pending: True
      - action: action_notify_medication
      - action: SlotSet('reminder_callback_pending', None)
